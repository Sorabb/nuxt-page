import{aG as p,r as b,o as _,v as m,t as S}from"./9p-oA8uT.js";var v={};const h="1234567890",H={__name:"captcha",props:{code:{},codeModifiers:{}},emits:["update:code"],setup(M){const f=p(M,"code"),t={contentWidth:100,contentHeight:32,codeLength:4,backgroundColorMin:180,backgroundColorMax:240,fontSizeMin:25,fontSizeMax:30,colorMin:50,colorMax:160,lineColorMin:40,lineColorMax:180,dotColorMin:0,dotColorMax:255,dotNum:30},c=b(null),g=o=>{const e=c.value.getContext("2d");e.fillStyle=r(t.backgroundColorMin,t.backgroundColorMax),e.strokeStyle=r(t.backgroundColorMin,t.backgroundColorMax),e.fillRect(0,0,t.contentWidth,t.contentHeight),e.strokeRect(0,0,t.contentWidth,t.contentHeight);for(let l=0;l<o.length;l++)u(e,o[l],l);C(e),k(e)},n=(o,e)=>Math.floor(Math.random()*(e-o)+o),r=(o,e)=>{const l=n(o,e),a=n(o,e),i=n(o,e);return"rgb("+l+","+a+","+i+")"},u=(o,e,l)=>{o.fillStyle=r(t.colorMin,t.colorMax),o.font=n(t.fontSizeMin,t.fontSizeMax)+"px SimHei",o.textBaseline="alphabetic";const a=(l+1)*(t.contentWidth/(t.codeLength+1)),i=n(t.fontSizeMax,t.contentHeight-12),d=n(-45,45);o.translate(a,i),o.rotate(d*Math.PI/180),o.fillText(e,0,0),o.rotate(-d*Math.PI/180),o.translate(-a,-i)},C=o=>{for(let e=0;e<2;e++)o.strokeStyle=r(t.lineColorMin,t.lineColorMax),o.beginPath(),o.moveTo(n(0,t.contentWidth),n(0,t.contentHeight)),o.lineTo(n(0,t.contentWidth),n(0,t.contentHeight)),o.stroke()},k=o=>{for(let e=0;e<t.dotNum;e++)o.fillStyle=r(t.dotColorMin,t.dotColorMax),o.beginPath(),o.arc(n(0,t.contentWidth),n(0,t.contentHeight),1,0,2*Math.PI),o.fill()},s=()=>{let o="";for(let e=0;e<t.codeLength;e++)o+=h[Math.floor(Math.random()*h.length)];v.NEXT_PUBLIC_ENV=="development"&&console.log(o),f.value=o,g(o)};return _(()=>{s()}),(o,e)=>(S(),m("canvas",{ref_key:"canvasRef",ref:c,height:"32px",width:"100%",onClick:s,style:{display:"block"}},null,512))}};export{H as default};
